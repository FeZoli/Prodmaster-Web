{{extend 'layout.html'}}
<script src='https://api.tiles.mapbox.com/mapbox.js/v2.2.1/mapbox.js'></script>
<script src='https://code.jquery.com/jquery-1.11.0.min.js'></script>
<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-osm/v0.1.0/leaflet-osm.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/v2.2.1/mapbox.css' rel='stylesheet' />
<style>
  body { margin:0; padding:0; }
  #map { position:relative; top:0; bottom:0; width:100%; height:600px; }
</style>
<div id='map'></div>
<script>
L.mapbox.accessToken = 'pk.eyJ1IjoiemZla2V0ZSIsImEiOiJjMDNjNjc4YWVmYjYxZDdlOGNlNGQxOTg0YzMyYzM5OCJ9.r2Z7TrX2EvfBIpRv7Rm0Gw';
var map = L.mapbox.map('map', 'mapbox.light');
var lat = 47.06059880;
var lng = 18.29688830;

$.ajax({
    url: "https://www.openstreetmap.org/api/0.6/way/260501602/full",
    dataType: "xml",
    success: function (xml) {
        var layer = new L.OSM.DataLayer(xml).addTo(map);
        map.fitBounds(layer.getBounds());
        map.setView([lat, lng], 15);
    }
});

var marker = L.marker([lat, lng], {
    icon: L.mapbox.marker.icon({
      'marker-color': '#f86767',
      'marker-symbol': 'bus'
    })
});


window.setInterval(function() {
    lat += 0.0001;
    marker.setLatLng(L.latLng(lat, lng));
    map.panTo(L.latLng(lat, lng));
}, 100);

marker.addTo(map);

</script>
